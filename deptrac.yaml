parameters:
  paths:
    - './src'
  exclude_files:
    - './DataFixtures/.'
    - './Shared/Kernel.'
    - '.*test.*'
  layers:
    - name: Application
      collectors:
        - type: className
          regex: '.*App\\User\\Application\\(Transformer|Command|CommandHandler|DTO|EventListener|EventSubscriber|Factory|MutationInput|Processor|Resolver|ExceptionMessageHandler|Message|Query|Controller|Sanitizer|Validator|Metric).*'
        - type: className
          regex: '.*App\\Shared\\Application\\(Validator|Transformer|Provider|Checker|Collector|Decoder|DTO|Evaluator|EventListener|Normalizer|QueryParameter|Resolver|Finder|Factory|Observability|Bus|Matcher).*'
        - type: className
          regex: '.*App\\Shared\\Application\\OpenApi\\(Factory|Builder|Processor|Extractor|Cleaner|Sanitizer|Augmenter|OpenApiFactory|Enum|ValueObject).*'
        - type: className
          regex: '.*App\\Internal\\HealthCheck\\Application\\.*'
    - name: Domain
      collectors:
        - type: className
          regex: '.*App\\[A-Za-z]+\\Domain\\(Aggregate|Entity|ValueObject|Event|Exception|Factory|Repository|Collection|Contract).*'
        - type: className
          regex: '.*App\\Shared\\Domain\\Bus\\(Command|Event).*'
        - type: className
          regex: '.*App\\Internal\\HealthCheck\\Domain\\.*'
    - name: Infrastructure
      collectors:
        - type: className
          regex: '.*App\\User\\Infrastructure\\(Factory|Repository|Decoder|Extractor|Evaluator|EventListener|Publisher).*'
        - type: className
          regex: '.*App\\OAuth\\Infrastructure\\(DoctrineType|Manager|Revoker|Serializer).*'
        - type: className
          regex: '.*App\\Shared\\Infrastructure\\(Bus|DoctrineType|RetryStrategy|Transformer|Factory|Command|Fixture|Observability|EventDispatcher|Cache|Serializer).*'
        - type: className
          regex: '.*App\\Internal\\HealthCheck\\Infrastructure\\.*'
    - name: Symfony
      collectors:
        - type: className
          regex: '.*Symfony\\.*'
    - name: Doctrine
      collectors:
        - type: className
          regex: '.*Doctrine\\.*'
    - name: ApiPlatform
      collectors:
        - type: className
          regex: '.*ApiPlatform\\.*'
    - name: Logging
      collectors:
        - type: className
          regex: '.*Psr\\Log\\.*'
    - name: League
      collectors:
        - type: className
          regex: '.*League\\Bundle\\OAuth2ServerBundle\\.*'
    - name: GraphQl
      collectors:
        - type: className
          regex: '.*GraphQL\\.*'
    - name: PhpAttributes
      collectors:
        - type: className
          regex: '^Override$'
    - name: Aws
      collectors:
        - type: className
          regex: '.*Aws\\.*'
    - name: Ramsey
      collectors:
        - type: className
          regex: '.*Ramsey\\.*'
  ruleset:
    Application:
      - Domain
      - Infrastructure
      - Symfony
      - ApiPlatform
      - Logging
      - League
      - GraphQl
      - PhpAttributes
      - Aws
      - Ramsey
    Infrastructure:
      - Domain
      - Application
      - Symfony
      - Doctrine
      - Logging
      - League
      - PhpAttributes
      - Aws
      - Ramsey
    Domain:
      - PhpAttributes
