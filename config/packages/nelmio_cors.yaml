nelmio_cors:
  defaults:
    origin_regex: true
    allow_credentials: true # AC: NFR-65 - enable credentials for cookies/auth
    allow_methods: ['GET', 'POST', 'PUT', 'PATCH', 'DELETE']
    allow_headers: ['Content-Type', 'Authorization']
    expose_headers: ['Link']
    max_age: 3600

when@dev:
  nelmio_cors:
    defaults:
      # AC: NFR-65 - explicit origin required when allow_credentials: true
      allow_origin: ['http://localhost:3000']

when@prod:
  nelmio_cors:
    defaults:
      allow_origin: ['%env(CORS_ALLOW_ORIGIN)%']
