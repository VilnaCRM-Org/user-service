openapi: 3.1.0
info:
  title: 'User Service API'
  description: 'This API provides endpoints to manage user data within a VilnaCRM.'
  contact:
    name: 'VilnaCRM Support'
    url: 'https://vilnacrm.com'
    email: support@vilnacrm.com
  license:
    name: CC0-1.0
    url: 'https://creativecommons.org/publicdomain/zero/1.0/'
  version: 1.0.0
servers:
  -
    url: 'https://api.vilnacrm.com'
    description: ''
paths:
  /api/health:
    get:
      operationId: api_health_get
      tags:
        - HealthCheck
      responses:
        '204':
          description: 'Health check passed with no content to return.'
          content: {  }
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Retrieves a HealthCheck resource.'
      description: 'Retrieves a HealthCheck resource.'
      parameters: []
  /api/oauth/authorize:
    summary: 'Requests for authorization code'
    description: 'Requests for authorization code'
    get:
      operationId: oauth_authorize_get
      tags:
        - OAuth
      responses:
        '200':
          description: 'Redirect target served HTML response.'
          content:
            text/html:
              example: '<!doctype html><html lang="en"><head><title>Example Domain</title></head><body><h1>Example Domain</h1></body></html>'
        '302':
          description: 'Redirect to the provided redirect URI with authorization code.'
          content:
            application/json:
              example: {  }
          headers:
            Location:
              description: 'The URI to redirect to for user authorization'
              schema:
                type: string
                format: uri
              example: 'https://example.com?code=e7f8c62113a4'
        '400':
          description: 'Unsupported grant type'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error: { type: string }
                  error_description: { type: string }
                  hint: { type: string }
                required:
                  - error
                  - error_description
                  - hint
              example:
                error: unsupported_grant_type
                error_description: 'The authorization grant type is not supported by the authorization server.'
                hint: 'Check that all required parameters have been provided'
          headers: {  }
        '401':
          description: 'Invalid client credentials'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error: { type: string }
                  error_description: { type: string }
                required:
                  - error
                  - error_description
              example:
                error: invalid_client
                error_description: 'Client authentication failed'
          headers: {  }
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Start OAuth authorization flow'
      description: 'Redirects the resource owner to grant access and returns an authorization code.'
      parameters:
        -
          name: response_type
          in: query
          description: 'Response type'
          required: true
          deprecated: false
          allowEmptyValue: false
          schema:
            type: string
            minLength: 1
            enum:
              - code
          style: form
          explode: false
          example: code
        -
          name: client_id
          in: query
          description: 'Client ID'
          required: true
          deprecated: false
          allowEmptyValue: false
          schema:
            type: string
            minLength: 1
          style: form
          explode: false
          example: dc0bc6323f16fecd4224a3860ca894c5
        -
          name: redirect_uri
          in: query
          description: 'Redirect uri'
          required: true
          deprecated: false
          allowEmptyValue: false
          schema:
            type: string
            minLength: 1
          style: form
          explode: false
          example: 'https://example.com'
        -
          name: scope
          in: query
          description: Scope
          required: false
          deprecated: false
          allowEmptyValue: false
          schema:
            type: string
            minLength: 1
          style: form
          explode: false
          example: 'profile email'
        -
          name: state
          in: query
          description: State
          required: false
          deprecated: false
          allowEmptyValue: false
          schema:
            type: string
            minLength: 1
          style: form
          explode: false
          example: af0ifjsldkj
  /api/oauth/token:
    summary: 'Requests for access token'
    description: 'Requests for access token'
    post:
      operationId: oauth_token_post
      tags:
        - OAuth
      responses:
        '200':
          description: 'OAuth access token response'
          content:
            application/json:
              schema:
                type: object
                properties:
                  token_type: { type: string }
                  expires_in: { type: integer }
                  access_token: { type: string }
                  refresh_token: { type: string }
                required:
                  - token_type
                  - expires_in
                  - access_token
                  - refresh_token
              example:
                token_type: Bearer
                expires_in: 3600
                access_token: eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdW
                refresh_token: df9b4ae7ce2e1e8f2a3c1b4d
          headers: {  }
        '400':
          description: 'Unsupported grant type'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error: { type: string }
                  error_description: { type: string }
                  hint: { type: string }
                required:
                  - error
                  - error_description
                  - hint
              example:
                error: unsupported_grant_type
                error_description: 'The authorization grant type is not supported by the authorization server.'
                hint: 'Check that all required parameters have been provided'
          headers: {  }
        '401':
          description: 'Invalid client credentials'
          content:
            application/json:
              schema:
                type: object
                properties:
                  error: { type: string }
                  error_description: { type: string }
                required:
                  - error
                  - error_description
              example:
                error: invalid_client
                error_description: 'Client authentication failed'
          headers: {  }
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Exchange authorization data for tokens'
      description: 'Exchanges an authorization code, password credentials, or refresh token for OAuth access and refresh tokens.'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                grant_type:
                  type: string
                  pattern: ^(authorization_code|refresh_token|password)$
                  enum: [password]
                client_id:
                  type: string
                  pattern: ^.+$
                  enum: [dc0bc6323f16fecd4224a3860ca894c5]
                client_secret:
                  type: string
                  pattern: ^.+$
                  enum: [8897b24436ac63e457fbd7d0bd5b678686c0cb214ef92fa9e8464fc7]
                redirect_uri:
                  type: string
                  format: uri
                  pattern: '^https?://.+$'
                  enum: ['https://example.com']
                code:
                  type: string
                  pattern: ^.+$
                  enum: [e7f8c62113a47f7a5a9dca1f]
                refresh_token:
                  type: string
                  pattern: ^.+$
                username:
                  type: string
                  pattern: ^.+$
                  enum: [password-reset-confirm@example.com]
                password:
                  type: string
                  pattern: ^.+$
                  enum: [Password1!]
                scope:
                  type: string
                  pattern: ^.+$
                  enum: ['profile email']
              required:
                - grant_type
                - username
                - password
            example:
              grant_type: password
              client_id: dc0bc6323f16fecd4224a3860ca894c5
              client_secret: 8897b24436ac63e457fbd7d0bd5b678686c0cb214ef92fa9e8464fc7
              redirect_uri: 'https://example.com'
              code: e7f8c62113a47f7a5a9dca1f
              refresh_token: f7a5a9dca1fe7f8c62113a47
              username: password-reset-confirm@example.com
              password: Password1!
              scope: 'profile email'
        required: true
      security: []
  /api/users:
    get:
      operationId: api_users_get_collection
      tags:
        - User
      responses:
        '400':
          description: 'Bad request'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: 'https://tools.ietf.org/html/rfc2616#section-10'
                title: 'An error occurred'
                detail: 'The input data is misformatted.'
                status: 400
          headers: {  }
        '200':
          description: 'Users returned'
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties: { confirmed: { type: boolean }, email: { type: string }, initials: { type: string }, id: { type: string } }
                  required: [confirmed, email, initials, id]
              example:
                -
                  confirmed: false
                  email: user@example.com
                  initials: 'Name Surname'
                  id: 018dd6ba-e901-7a8c-b27d-65d122caca6b
          headers: {  }
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Retrieves the collection of User resources.'
      description: 'Retrieves the collection of User resources.'
      parameters:
        -
          name: page
          in: query
          description: 'The collection page number'
          required: false
          deprecated: false
          allowEmptyValue: false
          schema:
            type: integer
            default: 1
            minimum: 1
          style: form
          explode: false
        -
          name: itemsPerPage
          in: query
          description: 'The number of items per page'
          required: false
          deprecated: false
          allowEmptyValue: false
          schema:
            type: integer
            default: 30
            minimum: 1
          style: form
          explode: false
    post:
      operationId: create_http
      tags:
        - User
      responses:
        '201':
          description: 'User created'
          content:
            application/json:
              schema:
                type: object
                properties:
                  confirmed: { type: boolean }
                  email: { type: string }
                  initials: { type: string }
                  id: { type: string }
                required:
                  - confirmed
                  - email
                  - initials
                  - id
              example:
                confirmed: false
                email: create-user@example.com
                initials: 'Create User'
                id: 018dd6ba-e901-7a8c-b27d-65d122caca70
          headers: {  }
        '400':
          description: 'Bad request'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: 'https://tools.ietf.org/html/rfc2616#section-10'
                title: 'An error occurred'
                detail: 'The input data is misformatted.'
                status: 400
          headers: {  }
        '422':
          description: 'Validation error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  violations: { type: array, items: { type: object } }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - violations
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'some_property: This value should not be blank.'
                violations:
                  - { propertyPath: some_property, message: 'This value should not be blank.', code: c1051bb4-d103-4f74-8988-acbcafc7fdc3 }
                status: 422
          headers: {  }
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Creates a User resource.'
      description: 'Creates a User resource.'
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - initials
                - password
              properties:
                email:
                  type: string
                  format: email
                  maxLength: 255
                initials:
                  type: string
                  maxLength: 255
                  pattern: '^(?!\d).*\S.*$'
                password:
                  type: string
                  minLength: 8
                  maxLength: 64
                  pattern: '^(?=.*[0-9])(?=.*[A-Z]).{8,64}$'
              additionalProperties: false
              unevaluatedProperties: false
            example:
              email: create-user@example.com
              initials: 'Create User'
              password: CreatePass1!
        required: true
  /api/users/batch:
    post:
      operationId: create_batch_http
      tags:
        - User
      responses:
        '201':
          description: 'Users returned'
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties: { confirmed: { type: boolean }, email: { type: string }, initials: { type: string }, id: { type: string } }
                  required: [confirmed, email, initials, id]
              example:
                -
                  confirmed: false
                  email: batch-user-one@example.com
                  initials: 'Batch User One'
                  id: 018dd6ba-e901-7a8c-b27d-65d122caca71
          headers: {  }
        '400':
          description: 'Bad request'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: 'https://tools.ietf.org/html/rfc2616#section-10'
                title: 'An error occurred'
                detail: 'The input data is misformatted.'
                status: 400
          headers: {  }
        '422':
          description: 'Validation error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  violations: { type: array, items: { type: object } }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - violations
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'some_property: This value should not be blank.'
                violations:
                  - { propertyPath: some_property, message: 'This value should not be blank.', code: c1051bb4-d103-4f74-8988-acbcafc7fdc3 }
                status: 422
          headers: {  }
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Creates a User resource.'
      description: 'Creates a User resource.'
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - users
              properties:
                users:
                  type: array
                  minItems: 1
                  uniqueItems: true
                  items: { type: object, required: [email, initials, password], properties: { email: { type: string, format: email, maxLength: 255 }, initials: { type: string, maxLength: 255, pattern: '^(?!\d).*\S.*$' }, password: { type: string, minLength: 8, maxLength: 64, pattern: '^(?=.*[0-9])(?=.*[A-Z]).{8,64}$' } }, additionalProperties: false, unevaluatedProperties: false }
            example:
              users:
                -
                  email: batch-user-one@example.com
                  initials: 'Batch User One'
                  password: BatchPass1!
                -
                  email: batch-user-two@example.com
                  initials: 'Batch User Two'
                  password: BatchPass2!
        required: true
  /api/users/confirm:
    patch:
      operationId: confirm_http
      tags:
        - User
      responses:
        '200':
          description: 'User confirmed'
          content:
            application/json:
              example: {  }
          headers: {  }
        '400':
          description: 'Bad request'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: 'https://tools.ietf.org/html/rfc2616#section-10'
                title: 'An error occurred'
                detail: 'The input data is misformatted.'
                status: 400
          headers: {  }
        '404':
          description: 'Token not found or expired'
          content:
            application/problem+json:
              example: {  }
          headers: {  }
        '422':
          description: 'Validation error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  violations: { type: array, items: { type: object } }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - violations
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'some_property: This value should not be blank.'
                violations:
                  - { propertyPath: some_property, message: 'This value should not be blank.', code: c1051bb4-d103-4f74-8988-acbcafc7fdc3 }
                status: 422
          headers: {  }
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Confirms the User'
      description: 'Confirms the User'
      parameters: []
      requestBody:
        content:
          application/merge-patch+json:
            schema:
              type: object
              properties:
                token:
                  type: string
                  enum: [confirm-token]
              required:
                - token
            example:
              token: confirm-token
        required: true
  '/api/users/{id}':
    get:
      operationId: api_users_id_get
      tags:
        - User
      responses:
        '404':
          description: 'User not found'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: 'https://tools.ietf.org/html/rfc2616#section-10'
                title: 'An error occurred'
                detail: 'User not found'
                status: 404
          headers: {  }
        '200':
          description: 'User returned'
          content:
            application/json:
              schema:
                type: object
                properties:
                  confirmed: { type: boolean }
                  email: { type: string }
                  initials: { type: string }
                  id: { type: string }
                required:
                  - confirmed
                  - email
                  - initials
                  - id
              example:
                confirmed: false
                email: user@example.com
                initials: 'Name Surname'
                id: 018dd6ba-e901-7a8c-b27d-65d122caca6b
          headers: {  }
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Retrieves a User resource.'
      description: 'Retrieves a User resource.'
      parameters:
        -
          name: id
          in: path
          description: 'User identifier'
          required: true
          deprecated: false
          schema:
            type: string
            format: uuid
            enum:
              - 018dd6ba-e901-7a8c-b27d-65d122caca6b
          style: simple
          explode: false
          example: 018dd6ba-e901-7a8c-b27d-65d122caca6b
    put:
      operationId: api_users_id_put
      tags:
        - User
      responses:
        '200':
          description: 'User updated'
          content:
            application/json:
              schema:
                type: object
                properties:
                  confirmed: { type: boolean }
                  email: { type: string }
                  initials: { type: string }
                  id: { type: string }
                required:
                  - confirmed
                  - email
                  - initials
                  - id
              example:
                confirmed: false
                email: update-user@example.com
                initials: 'Update User'
                id: 018dd6ba-e901-7a8c-b27d-65d122caca6c
          headers: {  }
        '400':
          description: 'Bad request'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: 'https://tools.ietf.org/html/rfc2616#section-10'
                title: 'An error occurred'
                detail: 'The input data is misformatted.'
                status: 400
          headers: {  }
        '404':
          description: 'User not found'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: 'https://tools.ietf.org/html/rfc2616#section-10'
                title: 'An error occurred'
                detail: 'User not found'
                status: 404
          headers: {  }
        '422':
          description: 'Validation error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  violations: { type: array, items: { type: object } }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - violations
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'some_property: This value should not be blank.'
                violations:
                  - { propertyPath: some_property, message: 'This value should not be blank.', code: c1051bb4-d103-4f74-8988-acbcafc7fdc3 }
                status: 422
          headers: {  }
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Replaces the User resource.'
      description: 'Replaces the User resource.'
      parameters:
        -
          name: id
          in: path
          description: 'User identifier'
          required: true
          deprecated: false
          schema:
            type: string
            format: uuid
            enum:
              - 018dd6ba-e901-7a8c-b27d-65d122caca6c
          style: simple
          explode: false
          example: 018dd6ba-e901-7a8c-b27d-65d122caca6c
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  maxLength: 255
                  format: email
                initials:
                  type: string
                  maxLength: 255
                  pattern: '^(?!\d).*\S.*$'
                oldPassword:
                  type: string
                  maxLength: 64
                  pattern: '^(?=.*[0-9])(?=.*[A-Z]).{8,64}$'
                newPassword:
                  type: string
                  maxLength: 64
                  pattern: '^(?=.*[0-9])(?=.*[A-Z]).{8,64}$'
              required:
                - email
                - initials
                - oldPassword
                - newPassword
            example:
              email: update-user@example.com
              initials: 'Update User'
              oldPassword: Password1!
              newPassword: Password1!
        required: true
    delete:
      operationId: api_users_id_delete
      tags:
        - User
      responses:
        '204':
          description: 'User resource deleted'
          content: {  }
          headers: {  }
        '404':
          description: 'User not found'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: 'https://tools.ietf.org/html/rfc2616#section-10'
                title: 'An error occurred'
                detail: 'User not found'
                status: 404
          headers: {  }
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Removes the User resource.'
      description: 'Removes the User resource.'
      parameters:
        -
          name: id
          in: path
          description: 'User identifier'
          required: true
          deprecated: false
          schema:
            type: string
            format: uuid
            enum:
              - 018dd6ba-e901-7a8c-b27d-65d122caca6d
          style: simple
          explode: false
          example: 018dd6ba-e901-7a8c-b27d-65d122caca6d
    patch:
      operationId: api_users_id_patch
      tags:
        - User
      responses:
        '200':
          description: 'User updated'
          content:
            application/json:
              schema:
                type: object
                properties:
                  confirmed: { type: boolean }
                  email: { type: string }
                  initials: { type: string }
                  id: { type: string }
                required:
                  - confirmed
                  - email
                  - initials
                  - id
              example:
                confirmed: false
                email: update-user@example.com
                initials: 'Update User'
                id: 018dd6ba-e901-7a8c-b27d-65d122caca6c
          headers: {  }
        '400':
          description: 'Bad request'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: 'https://tools.ietf.org/html/rfc2616#section-10'
                title: 'An error occurred'
                detail: 'The input data is misformatted.'
                status: 400
          headers: {  }
        '404':
          description: 'User not found'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: 'https://tools.ietf.org/html/rfc2616#section-10'
                title: 'An error occurred'
                detail: 'User not found'
                status: 404
          headers: {  }
        '422':
          description: 'Validation error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  violations: { type: array, items: { type: object } }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - violations
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'some_property: This value should not be blank.'
                violations:
                  - { propertyPath: some_property, message: 'This value should not be blank.', code: c1051bb4-d103-4f74-8988-acbcafc7fdc3 }
                status: 422
          headers: {  }
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Updates the User resource.'
      description: 'Updates the User resource.'
      parameters:
        -
          name: id
          in: path
          description: 'User identifier'
          required: true
          deprecated: false
          schema:
            type: string
            format: uuid
            enum:
              - 018dd6ba-e901-7a8c-b27d-65d122caca6c
          style: simple
          explode: false
          example: 018dd6ba-e901-7a8c-b27d-65d122caca6c
      requestBody:
        content:
          application/merge-patch+json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  maxLength: 255
                  format: email
                initials:
                  type: string
                  maxLength: 255
                  pattern: '^(?!\d).*\S.*$'
                oldPassword:
                  type: string
                  maxLength: 64
                  pattern: '^(?=.*[0-9])(?=.*[A-Z]).{8,64}$'
                newPassword:
                  type: string
                  maxLength: 64
                  pattern: '^(?=.*[0-9])(?=.*[A-Z]).{8,64}$'
              required:
                - oldPassword
            example:
              email: update-user@example.com
              initials: 'Update User'
              oldPassword: Password1!
              newPassword: Password1!
        required: true
  '/api/users/{id}/resend-confirmation-email':
    post:
      operationId: api_users_idresend-confirmation-email_post
      tags:
        - User
      responses:
        '200':
          description: 'Email was send again'
          content:
            application/json:
              example: {  }
          headers: {  }
        '400':
          description: 'Bad request'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: 'https://tools.ietf.org/html/rfc2616#section-10'
                title: 'An error occurred'
                detail: 'The input data is misformatted.'
                status: 400
          headers: {  }
        '404':
          description: 'User not found'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: 'https://tools.ietf.org/html/rfc2616#section-10'
                title: 'An error occurred'
                detail: 'User not found'
                status: 404
          headers: {  }
        '429':
          description: 'Too many requests'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: 'https://tools.ietf.org/html/rfc2616#section-10'
                title: 'An error occurred'
                detail: 'Cannot send new email till 2024-01-24T12:43:01+00:00'
                status: 429
          headers: {  }
        '415':
          description: 'Unsupported media type'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/415
                title: 'Unsupported Media Type'
                detail: 'The "Content-Type" header must exist.'
                status: 415
          headers: {  }
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Resends confirmation email'
      description: 'Resends confirmation email'
      parameters:
        -
          name: id
          in: path
          description: 'User identifier'
          required: true
          deprecated: false
          schema:
            type: string
            format: uuid
            enum:
              - 018dd6ba-e901-7a8c-b27d-65d122caca6b
          style: simple
          explode: false
          example: 018dd6ba-e901-7a8c-b27d-65d122caca6b
      requestBody:
        description: 'This operation does not expect a body.'
        content:
          application/json:
            schema:
              type: object
              properties: {  }
        required: false
  /api/reset-password:
    post:
      operationId: request_password_reset
      tags:
        - 'User reset password'
      responses:
        '204':
          description: 'Password reset request accepted'
          content: {  }
        '400':
          description: 'Invalid request payload'
        '404':
          description: 'User not found'
        '422':
          description: 'Validation error'
        '429':
          description: 'Password reset rate limit exceeded'
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Request a password reset'
      description: 'Initiates a password reset process by sending a reset token to the provided email address.'
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
                  maxLength: 255
            example:
              email: password-reset@example.com
          application/ld+json:
            schema:
              type: object
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
                  maxLength: 255
            example:
              email: password-reset@example.com
        required: true
  /api/reset-password/confirm:
    post:
      operationId: confirm_password_reset
      tags:
        - 'User reset password'
      responses:
        '204':
          description: 'Password reset confirmed'
          content: {  }
        '400':
          description: 'Invalid or expired password reset token'
        '404':
          description: 'Password reset token not found'
        '422':
          description: 'Validation error'
        '500':
          description: 'Internal server error'
          content:
            application/problem+json:
              schema:
                type: object
                properties:
                  type: { type: string }
                  title: { type: string }
                  detail: { type: string }
                  status: { type: integer }
                required:
                  - type
                  - title
                  - detail
                  - status
              example:
                type: /errors/500
                title: 'An error occurred'
                detail: 'Something went wrong'
                status: 500
          headers: {  }
      summary: 'Confirm a password reset'
      description: 'Completes the password reset process by validating the reset token and setting a new password.'
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - token
                - newPassword
              properties:
                token:
                  type: string
                  maxLength: 255
                  enum: [reset-confirm-token]
                newPassword:
                  type: string
                  minLength: 8
                  maxLength: 64
                  pattern: '^(?=.*[0-9])(?=.*[A-Z]).{8,64}$'
                  enum: [passWORD1]
            example:
              token: reset-confirm-token
              newPassword: passWORD1
          application/ld+json:
            schema:
              type: object
              required:
                - token
                - newPassword
              properties:
                token:
                  type: string
                  maxLength: 255
                  enum: [reset-confirm-token-ld]
                newPassword:
                  type: string
                  minLength: 8
                  maxLength: 64
                  pattern: '^(?=.*[0-9])(?=.*[A-Z]).{8,64}$'
                  enum: [passWORD1]
            example:
              token: reset-confirm-token-ld
              newPassword: passWORD1
        required: true
components:
  schemas:
    ConstraintViolation:
      type: object
      description: 'Unprocessable entity'
      properties:
        status:
          default: 422
          type: integer
        violations:
          type: array
          items:
            type: object
            properties:
              propertyPath:
                type: string
                description: 'The property path of the violation'
              message:
                type: string
                description: 'The message associated with the violation'
        detail:
          readOnly: true
          type: string
        type:
          readOnly: true
          type: string
        title:
          readOnly: true
          type:
            - string
            - 'null'
        instance:
          readOnly: true
          type:
            - string
            - 'null'
    EmptyResponse.ConfirmPasswordResetDto:
      type: object
      required:
        - token
        - newPassword
      properties:
        token:
          maxLength: 255
          type: string
        newPassword:
          maxLength: 64
          minLength: 8
          pattern: '^(.*[A-Z].*)$'
          type: string
    EmptyResponse.RequestPasswordResetDto:
      type: object
      required:
        - email
      properties:
        email:
          format: email
          maxLength: 255
          externalDocs:
            url: 'https://schema.org/email'
          type: string
    Error:
      type: object
      description: 'A representation of common errors.'
      properties:
        title:
          readOnly: true
          description: 'A short, human-readable summary of the problem.'
          type: string
        detail:
          readOnly: true
          description: 'A human-readable explanation specific to this occurrence of the problem.'
          type: string
        status:
          type: number
          examples:
            - 404
          default: 400
        instance:
          readOnly: true
          description: 'A URI reference that identifies the specific occurrence of the problem. It may or may not yield further information if dereferenced.'
          type:
            - string
            - 'null'
        type:
          readOnly: true
          description: 'A URI reference that identifies the problem type'
          type: string
    HealthCheck:
      type: object
    HealthCheck.graphql:
      type: object
    HealthCheck.jsonld:
      allOf:
        -
          $ref: '#/components/schemas/HydraItemBaseSchema'
        -
          type: object
    HydraCollectionBaseSchema:
      allOf:
        -
          $ref: '#/components/schemas/HydraCollectionBaseSchemaNoPagination'
        -
          type: object
          properties:
            view:
              type: object
              properties:
                '@id':
                  type: string
                  format: iri-reference
                '@type':
                  type: string
                first:
                  type: string
                  format: iri-reference
                last:
                  type: string
                  format: iri-reference
                previous:
                  type: string
                  format: iri-reference
                next:
                  type: string
                  format: iri-reference
              example:
                '@id': string
                type: string
                first: string
                last: string
                previous: string
                next: string
    HydraCollectionBaseSchemaNoPagination:
      type: object
      properties:
        totalItems:
          type: integer
          minimum: 0
        search:
          type: object
          properties:
            '@type':
              type: string
            template:
              type: string
            variableRepresentation:
              type: string
            mapping:
              type: array
              items:
                type: object
                properties:
                  '@type': { type: string }
                  variable: { type: string }
                  property: { type: [string, 'null'] }
                  required: { type: boolean }
    HydraItemBaseSchema:
      type: object
      properties:
        '@context':
          oneOf:
            -
              type: string
            -
              type: object
              properties:
                '@vocab':
                  type: string
                hydra:
                  type: string
                  enum: ['http://www.w3.org/ns/hydra/core#']
              required:
                - '@vocab'
                - hydra
              additionalProperties: true
        '@id':
          type: string
        '@type':
          type: string
      required:
        - '@id'
        - '@type'
    User-output:
      type: object
      properties:
        confirmed:
          type: boolean
        email:
          type: string
        initials:
          type: string
        id:
          $ref: '#/components/schemas/UuidInterface-output'
    User.ConfirmUserDto.jsonMergePatch:
      type: object
      properties:
        token:
          type: string
    User.RetryDto:
      type: object
    User.UserPatchDto.jsonMergePatch:
      type: object
      properties:
        email:
          format: email
          maxLength: 255
          externalDocs:
            url: 'https://schema.org/email'
          type:
            - string
            - 'null'
        initials:
          maxLength: 255
          pattern: '^(.*\S.*)$'
          type:
            - string
            - 'null'
        oldPassword:
          maxLength: 64
          minLength: 8
          pattern: '^(.*[A-Z].*)$'
          type:
            - string
            - 'null'
        newPassword:
          minLength: 8
          maxLength: 64
          pattern: '^(.*[A-Z].*)$'
          type:
            - string
            - 'null'
    User.UserPutDto:
      type: object
      required:
        - email
        - initials
        - oldPassword
        - newPassword
      properties:
        email:
          format: email
          maxLength: 255
          externalDocs:
            url: 'https://schema.org/email'
          type:
            - string
            - 'null'
        initials:
          maxLength: 255
          pattern: '^(.*\S.*)$'
          type:
            - string
            - 'null'
        oldPassword:
          maxLength: 64
          minLength: 8
          pattern: '^(.*[A-Z].*)$'
          type:
            - string
            - 'null'
        newPassword:
          maxLength: 64
          minLength: 8
          pattern: '^(.*[A-Z].*)$'
          type:
            - string
            - 'null'
    User.UserRegisterBatchDto:
      type: object
      additionalProperties: false
      properties:
        users:
          type: array
          items:
            type:
              - string
              - 'null'
    User.UserRegisterDto:
      type: object
      additionalProperties: false
      required:
        - email
        - initials
        - password
      properties:
        email:
          format: email
          maxLength: 255
          externalDocs:
            url: 'https://schema.org/email'
          type: string
        initials:
          maxLength: 255
          pattern: '^(.*\S.*)$'
          type: string
        password:
          maxLength: 64
          minLength: 8
          pattern: '^(.*[A-Z].*)$'
          type: string
    User.graphql-output:
      type: object
      properties:
        confirmed:
          type: boolean
        email:
          type: string
        initials:
          type: string
        id:
          $ref: '#/components/schemas/UuidInterface.graphql-output'
    User.jsonld-output:
      allOf:
        -
          $ref: '#/components/schemas/HydraItemBaseSchema'
        -
          type: object
          properties:
            confirmed:
              type: boolean
            email:
              type: string
            initials:
              type: string
            id:
              $ref: '#/components/schemas/UuidInterface.jsonld-output'
    UuidInterface-output:
      type: object
    UuidInterface.graphql-output:
      type: object
    UuidInterface.jsonld-output:
      type: object
  responses: {  }
  parameters: {  }
  examples: {  }
  requestBodies: {  }
  headers: {  }
  securitySchemes:
    OAuth2:
      type: oauth2
      description: 'OAuth2 Authorization Code flow securing VilnaCRM API.'
      flows:
        authorizationCode:
          authorizationUrl: 'https://localhost/api/oauth/dialog'
          tokenUrl: 'https://localhost/api/oauth/token'
          scopes:
            'write:pets': 'modify pets in your account'
            'read:pets': 'read your pets'
    OAuthClientBasic:
      type: http
      scheme: basic
      description: 'HTTP Basic authentication for OAuth client credentials.'
security:
  -
    OAuth2: []
tags:
  -
    name: HealthCheck
    description: 'Service health monitoring endpoints'
  -
    name: OAuth
    description: 'OAuth 2.0 authorization and token endpoints'
  -
    name: User
    description: 'User account management operations'
  -
    name: 'User reset password'
    description: 'Password reset workflows'
webhooks: {  }
