<?xml version="1.0"?>
<ruleset name="PHPMD Production Ruleset"
         xmlns="http://pmd.sf.net/ruleset/1.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://pmd.sf.net/ruleset/1.0.0
                     http://pmd.sf.net/ruleset_xml_schema.xsd"
         xsi:noNamespaceSchemaLocation="http://pmd.sf.net/ruleset_xml_schema.xsd">
    <description>
        PHPMD ruleset for production code - strict but excludes legitimate patterns
    </description>

    <rule ref="rulesets/codesize.xml"/>

    <rule ref="rulesets/cleancode.xml">
        <!-- Static access is acceptable for:
             - Factory methods (::create, ::fromDomainEvent, ::fromPrimitives)
             - Named constructors
             - Utility/helper static methods
             This is a common DDD pattern and not a code smell in modern PHP -->
        <exclude name="StaticAccess"/>
    </rule>

    <rule ref="rulesets/design.xml">
        <!-- Factories and complex builders may have high coupling by design.
             EmfPayloadFactory needs to construct complex EMF payloads with many dependencies. -->
        <exclude name="CouplingBetweenObjects"/>
    </rule>
</ruleset>
